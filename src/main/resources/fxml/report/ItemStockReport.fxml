<?xml version="1.0" encoding="UTF-8"?>

<?import de.jensd.fx.glyphs.fontawesome.FontAwesomeIcon?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane style="-fx-background-color: #F5F5F5;" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.gurukrupa.controller.report.ItemStockReportController">

   <top>
      <!-- Header Section -->
      <HBox alignment="CENTER_LEFT" minHeight="45.0" prefHeight="50.0" style="-fx-background-color: #FFFFFF; -fx-padding: 12 20; -fx-border-color: #E0E0E0; -fx-border-width: 0 0 1 0;">
         <children>
            <Button fx:id="btnBack" onAction="#handleBack" style="-fx-background-color: #F5F5F5; -fx-text-fill: #424242; -fx-background-radius: 6; -fx-padding: 6 10; -fx-cursor: hand;">
               <graphic>
                  <FontAwesomeIcon fill="#424242" glyphName="ARROW_LEFT" size="1.0em" />
               </graphic>
            </Button>
            <Region minWidth="15.0" />
            <FontAwesomeIcon fill="#FF9800" glyphName="DIAMOND" size="1.3em">
               <HBox.margin>
                  <Insets right="10.0" />
               </HBox.margin>
            </FontAwesomeIcon>
            <Label style="-fx-font-family: 'Segoe UI'; -fx-font-weight: 600; -fx-font-size: 16px;" text="Item Stock Report" textFill="#212121" />
            <Region HBox.hgrow="ALWAYS" />
         </children>
      </HBox>
   </top>

   <center>
      <ScrollPane fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED" style="-fx-background-color: transparent;">
         <content>
            <VBox spacing="20.0" style="-fx-padding: 20;">
               <children>

                  <!-- Filters Section -->
                  <VBox spacing="15.0" style="-fx-background-color: #FFFFFF; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.08), 8, 0, 0, 3); -fx-padding: 20;">
                     <children>
                        <HBox alignment="CENTER_LEFT" spacing="10.0">
                           <children>
                              <FontAwesomeIcon fill="#FF9800" glyphName="FILTER" size="1.3em" />
                              <Label style="-fx-font-family: 'Segoe UI'; -fx-font-weight: 600; -fx-font-size: 16px;" text="Filters" textFill="#212121" />
                           </children>
                        </HBox>

                        <Separator prefWidth="200.0" />

                        <HBox alignment="CENTER_LEFT" spacing="15.0">
                           <children>
                              <VBox spacing="6.0" HBox.hgrow="ALWAYS">
                                 <children>
                                    <Label style="-fx-font-family: 'Segoe UI'; -fx-font-weight: 600; -fx-font-size: 13px;" text="Metal Type" textFill="#424242" />
                                    <ComboBox fx:id="cmbMetalType" prefWidth="220.0" promptText="Select Metal Type" style="-fx-font-family: 'Segoe UI';" />
                                 </children>
                              </VBox>

                              <VBox spacing="6.0" HBox.hgrow="ALWAYS">
                                 <children>
                                    <Label style="-fx-font-family: 'Segoe UI'; -fx-font-weight: 600; -fx-font-size: 13px;" text="Category" textFill="#424242" />
                                    <ComboBox fx:id="cmbCategory" prefWidth="220.0" promptText="Select Category" style="-fx-font-family: 'Segoe UI';" />
                                 </children>
                              </VBox>

                              <VBox spacing="6.0" HBox.hgrow="ALWAYS">
                                 <children>
                                    <Label style="-fx-font-family: 'Segoe UI'; -fx-font-weight: 600; -fx-font-size: 13px;" text="Stock Status" textFill="#424242" />
                                    <ComboBox fx:id="cmbStockStatus" prefWidth="180.0" promptText="All Items" style="-fx-font-family: 'Segoe UI';" />
                                 </children>
                              </VBox>

                              <VBox alignment="BOTTOM_LEFT" spacing="6.0">
                                 <children>
                                    <Label text=" " />
                                    <Button fx:id="btnShow" onAction="#handleShow" style="-fx-background-color: #FF9800; -fx-text-fill: white; -fx-font-family: 'Segoe UI'; -fx-font-weight: 600; -fx-font-size: 14px; -fx-padding: 10 30; -fx-background-radius: 8; -fx-cursor: hand;" text="SHOW">
                                       <graphic>
                                          <FontAwesomeIcon fill="#FFFFFF" glyphName="EYE" size="1.0em" />
                                       </graphic>
                                    </Button>
                                 </children>
                              </VBox>
                           </children>
                        </HBox>
                     </children>
                  </VBox>

                  <!-- Statistics Cards -->
                  <GridPane hgap="15.0" vgap="15.0">
                     <columnConstraints>
                        <ColumnConstraints hgrow="ALWAYS" minWidth="10.0" percentWidth="25.0" />
                        <ColumnConstraints hgrow="ALWAYS" minWidth="10.0" percentWidth="25.0" />
                        <ColumnConstraints hgrow="ALWAYS" minWidth="10.0" percentWidth="25.0" />
                        <ColumnConstraints hgrow="ALWAYS" minWidth="10.0" percentWidth="25.0" />
                     </columnConstraints>
                     <children>

                        <!-- Total Items Card -->
                        <VBox spacing="12.0" style="-fx-background-color: linear-gradient(to bottom right, #FF9800, #F57C00); -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.15), 8, 0, 0, 3); -fx-padding: 20;" GridPane.columnIndex="0">
                           <children>
                              <HBox alignment="CENTER_LEFT" spacing="12.0">
                                 <children>
                                    <VBox alignment="CENTER" style="-fx-background-color: rgba(255,255,255,0.2); -fx-background-radius: 10; -fx-padding: 10;">
                                       <children>
                                          <FontAwesomeIcon fill="#FFFFFF" glyphName="CUBES" size="1.8em" />
                                       </children>
                                    </VBox>
                                    <VBox spacing="4.0" HBox.hgrow="ALWAYS">
                                       <children>
                                          <Label style="-fx-font-family: 'Segoe UI'; -fx-font-weight: 600; -fx-font-size: 13px;" text="Total Items" textFill="rgba(255,255,255,0.9)" />
                                          <Label fx:id="lblTotalItems" style="-fx-font-family: 'Segoe UI'; -fx-font-weight: 700; -fx-font-size: 24px;" text="0" textFill="#FFFFFF" />
                                       </children>
                                    </VBox>
                                 </children>
                              </HBox>
                           </children>
                        </VBox>

                        <!-- Total Quantity Card -->
                        <VBox spacing="12.0" style="-fx-background-color: linear-gradient(to bottom right, #4CAF50, #45a049); -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.15), 8, 0, 0, 3); -fx-padding: 20;" GridPane.columnIndex="1">
                           <children>
                              <HBox alignment="CENTER_LEFT" spacing="12.0">
                                 <children>
                                    <VBox alignment="CENTER" style="-fx-background-color: rgba(255,255,255,0.2); -fx-background-radius: 10; -fx-padding: 10;">
                                       <children>
                                          <FontAwesomeIcon fill="#FFFFFF" glyphName="DATABASE" size="1.8em" />
                                       </children>
                                    </VBox>
                                    <VBox spacing="4.0" HBox.hgrow="ALWAYS">
                                       <children>
                                          <Label style="-fx-font-family: 'Segoe UI'; -fx-font-weight: 600; -fx-font-size: 13px;" text="Total Quantity" textFill="rgba(255,255,255,0.9)" />
                                          <Label fx:id="lblTotalQuantity" style="-fx-font-family: 'Segoe UI'; -fx-font-weight: 700; -fx-font-size: 24px;" text="0" textFill="#FFFFFF" />
                                       </children>
                                    </VBox>
                                 </children>
                              </HBox>
                           </children>
                        </VBox>

                        <!-- Total Weight Card -->
                        <VBox spacing="12.0" style="-fx-background-color: linear-gradient(to bottom right, #2196F3, #1976D2); -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.15), 8, 0, 0, 3); -fx-padding: 20;" GridPane.columnIndex="2">
                           <children>
                              <HBox alignment="CENTER_LEFT" spacing="12.0">
                                 <children>
                                    <VBox alignment="CENTER" style="-fx-background-color: rgba(255,255,255,0.2); -fx-background-radius: 10; -fx-padding: 10;">
                                       <children>
                                          <FontAwesomeIcon fill="#FFFFFF" glyphName="BRIEFCASE" size="1.8em" />
                                       </children>
                                    </VBox>
                                    <VBox spacing="4.0" HBox.hgrow="ALWAYS">
                                       <children>
                                          <Label style="-fx-font-family: 'Segoe UI'; -fx-font-weight: 600; -fx-font-size: 13px;" text="Total Weight" textFill="rgba(255,255,255,0.9)" />
                                          <Label fx:id="lblTotalWeight" style="-fx-font-family: 'Segoe UI'; -fx-font-weight: 700; -fx-font-size: 24px;" text="0.000g" textFill="#FFFFFF" />
                                       </children>
                                    </VBox>
                                 </children>
                              </HBox>
                           </children>
                        </VBox>

                        <!-- Low Stock Items Card -->
                        <VBox spacing="12.0" style="-fx-background-color: linear-gradient(to bottom right, #F44336, #D32F2F); -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.15), 8, 0, 0, 3); -fx-padding: 20;" GridPane.columnIndex="3">
                           <children>
                              <HBox alignment="CENTER_LEFT" spacing="12.0">
                                 <children>
                                    <VBox alignment="CENTER" style="-fx-background-color: rgba(255,255,255,0.2); -fx-background-radius: 10; -fx-padding: 10;">
                                       <children>
                                          <FontAwesomeIcon fill="#FFFFFF" glyphName="WARNING" size="1.8em" />
                                       </children>
                                    </VBox>
                                    <VBox spacing="4.0" HBox.hgrow="ALWAYS">
                                       <children>
                                          <Label style="-fx-font-family: 'Segoe UI'; -fx-font-weight: 600; -fx-font-size: 13px;" text="Low Stock" textFill="rgba(255,255,255,0.9)" />
                                          <Label fx:id="lblLowStock" style="-fx-font-family: 'Segoe UI'; -fx-font-weight: 700; -fx-font-size: 24px;" text="0" textFill="#FFFFFF" />
                                       </children>
                                    </VBox>
                                 </children>
                              </HBox>
                           </children>
                        </VBox>

                     </children>
                  </GridPane>

                  <!-- Stock Table -->
                  <VBox spacing="12.0" style="-fx-background-color: #FFFFFF; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.08), 8, 0, 0, 3); -fx-padding: 20;">
                     <children>
                        <HBox alignment="CENTER_LEFT" spacing="10.0">
                           <children>
                              <FontAwesomeIcon fill="#FF9800" glyphName="LIST" size="1.3em" />
                              <Label style="-fx-font-family: 'Segoe UI'; -fx-font-weight: 600; -fx-font-size: 16px;" text="Item Stock Details" textFill="#212121" />
                              <Region HBox.hgrow="ALWAYS" />
                              <Button fx:id="btnExport" onAction="#handleExport" style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-family: 'Segoe UI'; -fx-font-weight: 600; -fx-padding: 8 16; -fx-background-radius: 6; -fx-cursor: hand;" text="EXPORT">
                                 <graphic>
                                    <FontAwesomeIcon fill="#FFFFFF" glyphName="DOWNLOAD" size="1.0em" />
                                 </graphic>
                              </Button>
                           </children>
                        </HBox>
                        <Separator prefWidth="200.0" />
                        <TableView fx:id="tableStock" prefHeight="400.0">
                           <columns>
                              <TableColumn fx:id="colSno" prefWidth="50.0" text="#" />
                              <TableColumn fx:id="colItemCode" prefWidth="120.0" text="Item Code" />
                              <TableColumn fx:id="colItemName" prefWidth="200.0" text="Item Name" />
                              <TableColumn fx:id="colCategory" prefWidth="120.0" text="Category" />
                              <TableColumn fx:id="colMetalType" prefWidth="100.0" text="Metal" />
                              <TableColumn fx:id="colPurity" prefWidth="80.0" text="Purity" />
                              <TableColumn fx:id="colGrossWeight" prefWidth="100.0" text="Gross Wt (g)" />
                              <TableColumn fx:id="colNetWeight" prefWidth="100.0" text="Net Wt (g)" />
                              <TableColumn fx:id="colQuantity" prefWidth="80.0" text="Qty" />
                              <TableColumn fx:id="colTotalWeight" prefWidth="110.0" text="Total Wt (g)" />
                              <TableColumn fx:id="colStatus" prefWidth="100.0" text="Status" />
                           </columns>
                        </TableView>
                     </children>
                  </VBox>

                  <!-- Add spacing at bottom -->
                  <Region prefHeight="15.0" minHeight="10.0" />

               </children>
            </VBox>
         </content>
      </ScrollPane>
   </center>
</BorderPane>
